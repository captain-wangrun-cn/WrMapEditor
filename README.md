# 2D 横版卷轴地图编辑器

> [!CAUTION]
> 此项目99%皆使用AI生成，仅保证可运行，不保证可读性、可维护性。任何由此引发的心理或生理不适，使用者请自负其责

基于 React + TypeScript + Vite 的网页版 2D 横版地图编辑器，适配桌面和移动端，采用“拼装”式实体放置（非方格瓦片），可通过预制体快速搭建关卡并导出 JSON 项目文件，支持 WebSocket 协作。

## 主要特性

- 🎨 **拼装式放置/选择/平移**：左键放置或选择，右键/中键拖动平移，滚轮缩放；移动端支持双指缩放、单指拖动。
- 🧩 **预制体管理**：内置平台、草皮、石块、陷阱、金币、出生点等预制，可自定义名称、颜色、大小与 Emoji。
- 🗺️ **项目管理**：设置舞台宽高与网格间距；支持清空、居中视图；对齐网格可开关。
- � **实时协作**：内置 WebSocket 客户端，可加入同一会话同步场景。
- �💾 **导入/导出**：一键导出 JSON；可从 JSON 导入继续编辑；自动保存到浏览器本地存储。
- 📱 **响应式布局**：侧栏可横向滚动，按钮尺寸适合触摸操作。

## 快速开始

```powershell
# 安装依赖
npm install

# 本地开发（http://localhost:5173）


# 生产构建
npm run build
```

## 使用指南

1. **新建项目**：在左侧“新建/尺寸”面板设定名称、宽高、像素/格后点击“新建项目”。
2. **选择预制体**：在“预制体”列表点击选择，或在“新增预制”中输入名称、颜色、Emoji 后添加。
3. **绘制**：
   - 左键/单指：绘制选中预制体
   - 右键/中键/平移模式：拖动画布
   - 滚轮或双指：缩放
   - 橡皮：选择“橡皮”或切换橡皮工具
4. **视图**：点击“居中”使地图居中显示；“清空”会重置网格。
5. **导出/导入**：
   - 导出：点击“导出JSON”下载项目文件

### 启动 Python WebSocket 服务器（可选，用于协作）

```powershell
cd python-server
python -m venv .venv
.\.venv\Scripts\activate
pip install -r requirements.txt
python main.py  # 默认 0.0.0.0:8765
```

客户端中填入 `ws://localhost:8765` 与同一会话 ID（如 `room-1`）即可同步。
   - 导入：点击“导入JSON”选择先前导出的文件

## 导出文件格式

导出的 JSON 包含项目基本信息、预制体列表和网格数据，示例结构：

```json
{
  "name": "横版地图",
  "width": 64,
  "height": 18,
  "tileSize": 32,
  "background": "#0b1220",
  "prefabs": [
    { "id": "ground", "name": "地面", "color": "#8B5A2B", "emoji": "🧱" }
  ],
  "grid": [["ground", null, null]]
}
```

## 控制与提示

- 左键：放置（放置工具）或选择/拖动（选择工具）
- 右键/中键或“平移”工具：拖动画布
- 滚轮或双指：缩放（0.3x ~ 3.5x）
- 对齐网格：可选，网格间距可调
- 画布支持触控，若触摸无响应，请确认浏览器允许触摸事件
- 实时协作：在侧栏填入 WebSocket URL 和会话 ID，点击“连接”；状态显示“已连接”即会自动同步最近变更

## 目录结构

- `src/App.tsx`：地图编辑器主要逻辑与 UI（拼装式实体放置+WS 同步）
- `src/App.css`：样式与响应式布局
- `public/`：静态资源占位
- `python-server/`：简易 WebSocket 广播服务器与依赖

## 许可证

此示例未附带特定许可证，可按需修改使用。
```
